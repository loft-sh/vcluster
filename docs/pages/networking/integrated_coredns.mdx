---
title: Integrated CoreDNS
sidebar_label: Integrated CoreDNS 
---

Normal deployment of vcluster consists usually of two pods per vcluster:
- Vcluster Pod
    - `APIServer` container 
    - `syncer` container
- `CoreDNS` Pod

As part of the vcluster.pro offering we have added the functionality of integrating the
CoreDNS as part of the vcluster syncer itself. As a result of this, when enabled there will only be
a single pod containing all 3 components 
- Vcluster Pod
    - `APIServer` container
    - (`syncer` + `CoreDNS`) container

### Enabling Integrated CoreDNS

To enable this feature, simply create the vcluster with the following values:

```yaml
coredns:
  integrated: true
```

This would apply sane defaults to get started with a vcluster deployed with an CoreDNS compilied into
the vcluster syncer itself.

### Advanced Configuration

For more advanced configuration of the integrated CoreDNS itself follow the below sections

#### Custom CoreDNS Configuration

vcluster.pro provides and option to pass in your custom CoreDNS configuration which can be passed to extend the default one used by vcluster.
To utilize this, one needs to pass the `Corefile` configuration as part of a configmap named `coredns-custom` in the same namespace as the vcluster

```yaml
apiVersion: v1
kind: configmap
metadata:
  name: coredns-custom
  namespace: <vcluster-namespace>
data:
  custom1.server: |-
    ... <your_custom_config> ...
  custom2.server: |-
    ... <your_custom_config> ...
```
